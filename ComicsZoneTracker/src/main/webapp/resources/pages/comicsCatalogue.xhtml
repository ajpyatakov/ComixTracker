<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:pf="http://jsf.playerfinder.net/components"
                template="/resources/templates/basic.xhtml"
                >
    <ui:define name="articleContent">
        <h:form id="form">
            <p:dataTable
                id="comicsTable"
                var="comics"
                widgetVar="comicsTable"
                value="#{comicsCatalogueView.lazyModel}" 
                paginator="true" 
                rows="3"
                paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} 
                    {CurrentPageReport} {NextPageLink} {LastPageLink}"
                rowsPerPageTemplate="3,6,9" 
                selectionMode="single" 
                selection="#{comicsCatalogueView.selectedComics}"
                emptyMessage="No comics found!"
                lazy="true">
                
                <p:ajax 
                    event="rowSelect" 
                    listener="#{comicsCatalogueView.onRowSelect}"
                    update=":form:comicsDetail" 
                    oncomplete="PF('comicsDialog').show()"/> 
                
                <p:column width="30%" 
                          headerText="#{comicsCatalogueView.columnComicsName}" 
                          sortBy="#{comics.name}" 
                          filterBy="#{comics.name}" 
                          >
                    <h:outputText value="#{comics.name}" />
                </p:column>      
                
                <p:column width="20%" 
                          headerText="#{comicsCatalogueView.columnComicsRating}" 
                          sortBy="#{comics.rating}" 
                          filterBy="#{comics.rating}" 
                          filterMatchMode="exact" >
                    <f:facet name="filter" >
                        <p:selectOneMenu onchange="PF('comicsTable').filter()" 
                                         >
                            <f:selectItem itemLabel="All ratings" itemValue="#{null}" 
                                          noSelectionOption="true"/> 
                            <f:selectItems value="#{comicsCatalogueView.ratings}" 
                                         />
                        </p:selectOneMenu>
                    </f:facet>
                 
                <h:panelGroup>
                    <pf:rating  disabled="true"
                                totalStars="5"
                                
                                step="0.1"
                                value="#{comics.rating}"
                                >
                    </pf:rating>
                    <h:outputText value="Rating: "
                        style="padding-left: 10px;" />
                    <h:outputText value="#{comics.rating}" />
                </h:panelGroup>
                    
                </p:column>
                <p:column width="15%"
                          headerText="#{comicsCatalogueView.columnComicsImage}" > 
                            
                    <p:graphicImage value="#{comics.image}"
                                         width="100%"
                                         height="100%"/> 
                </p:column>
                <p:column headerText="#{comicsCatalogueView.columnComicsDescription}">
                    <h:outputText value="#{comics.description}"/>
                </p:column>
            </p:dataTable>
            
            <p:dialog header="Comics Detail" 
                      widgetVar="comicsDialog" 
                      modal="true" 
                      showEffect="fade" 
                      hideEffect="fade" 
                      resizable="false" >
                <p:outputPanel id="comicsDetail" style="text-align:center;">
                    <p:panelGrid  columns="2" 
                                  rendered="#{not empty comicsCatalogueView.selectedComics}" 
                                  columnClasses="label,value">
                    <f:facet name="header">
                        <p:graphicImage 
                            value="#{comicsCatalogueView.selectedComics.image}"
                                         width="200px"
                                         height="200px"/> 
                    </f:facet>
                    <f:facet name="footer">
                        <p:link value="Visit comics page"
                                href="comicspage.jsf" />
                    </f:facet>
 
                    <h:outputText value="Id:" />
                    <h:outputText value="#{comicsCatalogueView.selectedComics.id}" />
 
                    <h:outputText value="Name" />
                    <h:outputText value="#{comicsCatalogueView.selectedComics.name}" />
 
                    <h:outputText value="Rating:" />
                    <pf:rating value="#{comicsCatalogueView.selectedComics.rating}" 
                               disabled="true" totalStars="5"
                               step="0.1"/>
 
                    <h:outputText value="Description:" />
                    <h:outputText value="#{comicsCatalogueView.selectedComics.description}"/>
                        
                    </p:panelGrid>
                </p:outputPanel>
            </p:dialog>
        </h:form>
    </ui:define>
</ui:composition>
